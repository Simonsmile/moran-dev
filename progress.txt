# Moran ERP - Progress Log

## 项目初始化 - 2026-02-27

### 项目背景:
本项目是对原有珠宝行业ERP系统 (iErp-Moran) 的完全重写。

### 技术选型确认:
- 后端: Java 21 + Spring Boot 3.4 + Spring Cloud Gateway + Nacos
- 认证: OAuth2 + JWT
- 数据库: PostgreSQL 16 (从MySQL迁移)
- 缓存: Redis 7
- 消息队列: RabbitMQ (含STOMP插件)
- 前端: Vue 3.5 + TypeScript + Element Plus + Pinia + Vite
- 部署: 阿里云 Ubuntu 22.04 + Docker

### 开发优先级:
1. 用户权限系统
2. 产品物料管理
3. 库存管理系统

### 任务统计:
- 总任务数: 42个
- 已完成: 1个
- 进行中: 0个
- 待处理: 41个

### 当前状态:
Task 1 已完成，准备开始 Task 2: 前端项目初始化

---

## 2026-02-27 - Task ID: 1 - 后端项目初始化

### What was done:
- 创建父POM (pom.xml)，配置Java 21、Spring Boot 3.4、Spring Cloud依赖管理
- 创建 moran-common 模块（公共工具类）
- 创建 moran-common-core 子模块：
  - Result<T> 统一响应类
  - ResultCode 枚举
  - BusinessException 业务异常类
  - GlobalExceptionHandler 全局异常处理器
  - Constants 常量类
- 创建 moran-common-redis 子模块：
  - RedisConfig 配置类
  - RedisService 服务类
- 创建 moran-common-security 子模块（空模块，后续开发）
- 创建 moran-common-mybatis 子模块：
  - BaseEntity 基础实体类
  - MybatisPlusConfig 配置类
  - JsonTypeHandler JSON类型处理器
- 创建 moran-gateway 模块（API网关）：
  - GatewayApplication 启动类
  - application.yml 配置文件
- 创建 moran-auth 模块（认证服务）：
  - AuthApplication 启动类
  - application.yml 配置文件
- 创建 moran-business 模块（核心业务服务）：
  - BusinessApplication 启动类
  - application.yml 配置文件
- 创建 moran-external 模块（外部对接服务）：
  - ExternalApplication 启动类
  - application.yml 配置文件
- 创建 moran-api 模块（Feign接口定义）：
  - moran-api-auth
  - moran-api-business
  - moran-api-external

### Testing:
- mvn clean compile 编译成功
- 所有模块依赖关系正确

### Notes:
- 由于Java 25与Lombok兼容性问题，移除了Lombok注解处理器
- 所有实体类改用手写getter/setter
- MyBatis Plus 3.5.9 的 PaginationInnerInterceptor 在当前版本中不存在，暂时移除分页插件
- 后续任务需要添加分页功能时可手动实现

---

## Template for New Entries

```
## [Date] - Task ID: [id] - [task title]

### What was done:
- [specific changes made]

### Testing:
- [how it was tested]

### Notes:
- [any relevant notes for future agents]
```
